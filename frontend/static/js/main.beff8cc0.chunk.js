(this["webpackJsonpreact-ui"]=this["webpackJsonpreact-ui"]||[]).push([[0],{10:function(e,t,o){var i={};i.web=o(26);var r={};r.smileapp=o(3),r.smileapp.SmileServiceClient=function(e,t,o){o||(o={}),o.format="text",this.client_=new i.web.GrpcWebClientBase(o),this.hostname_=e},r.smileapp.SmileServicePromiseClient=function(e,t,o){o||(o={}),o.format="text",this.client_=new i.web.GrpcWebClientBase(o),this.hostname_=e};var a=new i.web.MethodDescriptor("/smileapp.SmileService/detectMood",i.web.MethodType.UNARY,r.smileapp.MoodRequest,r.smileapp.MoodReply,(function(e){return e.serializeBinary()}),r.smileapp.MoodReply.deserializeBinary);new i.web.AbstractClientBase.MethodInfo(r.smileapp.MoodReply,(function(e){return e.serializeBinary()}),r.smileapp.MoodReply.deserializeBinary);r.smileapp.SmileServiceClient.prototype.detectMood=function(e,t,o){return this.client_.rpcCall(this.hostname_+"/smileapp.SmileService/detectMood",e,t||{},a,o)},r.smileapp.SmileServicePromiseClient.prototype.detectMood=function(e,t){return this.client_.unaryCall(this.hostname_+"/smileapp.SmileService/detectMood",e,t||{},a)},e.exports=r.smileapp},11:function(e,t,o){e.exports=o.p+"static/media/nuance_logo.d9db5260.jpg"},14:function(e,t,o){e.exports=o(27)},19:function(e,t,o){},20:function(e,t,o){},27:function(e,t,o){"use strict";o.r(t);var i=o(0),r=o.n(i),a=o(5),s=o.n(a),p=(o(19),o(20),o(6)),n=o(7),l=o(12),c=o(8),u=o(1),d=o(13),m=o(9),g=o.n(m),y=o(3),h=o(10),f=function(e){function t(e){var o;return Object(p.a)(this,t),(o=Object(l.a)(this,Object(c.a)(t).call(this,e))).webcamRef=r.a.createRef(),o.onCapture=o.onCapture.bind(Object(u.a)(o)),o.state={capturedImages:[],currentEmotion:{emoji:"\ud83d\ude10",x:0,y:0}},o}return Object(d.a)(t,e),Object(n.a)(t,[{key:"componentDidMount",value:function(){setInterval(this.onCapture,3100)}},{key:"onCapture",value:function(){var e=this,o=this.webcamRef.current.getScreenshot();if(o){var i=t.base64ToArrayBuffer(o.replace("data:image/jpeg;base64,","")),r=new h.SmileServiceClient("http://localhost:8080",null,null),a=new y.MoodRequest;a.setContenttype("image/jpeg"),a.setBody(i),r.detectMood(a,{}).on("data",(function(t){var i=t.getRect();e.setState((function(e){var r=e.capturedImages;return r.push(o),{capturedImages:r&&r.length>10?r.slice(1):r,currentEmotion:{emoji:t.getEmoji(),x:i.getX()||0,y:i.getY()||0}}}))}))}}},{key:"render",value:function(){var e=this.state,t=e.capturedImages,o=e.currentEmotion;return r.a.createElement("div",{className:"webcam"},r.a.createElement("div",{className:"webcamEmojiContainer"},r.a.createElement("div",{className:"emotionEmoji",style:{transform:"translate(".concat(o.y-190,"px,").concat(o.x-100,"px)"),visibility:"".concat(t.length>=1?"":"hidden")}},o.emoji),r.a.createElement(g.a,{audio:!1,height:400,width:500,ref:this.webcamRef,screenshotFormat:"image/jpeg"})),r.a.createElement("div",null,t.map((function(e,t){return r.a.createElement("span",null,r.a.createElement("img",{className:"imgGallery",key:t,alt:":)",style:{width:100,height:80},src:e}))}))))}}],[{key:"base64ToArrayBuffer",value:function(e){for(var t=window.atob(e),o=t.length,i=new Uint8Array(o),r=0;r<o;r++)i[r]=t.charCodeAt(r);return i}}]),t}(i.Component),M=o(11),R=o.n(M);var b=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"header"},r.a.createElement("img",{className:"logo",src:R.a,alt:"logo"}),r.a.createElement("div",null,r.a.createElement("strong",null,"Stream your smile... "),r.a.createElement("span",{role:"img","aria-label":":)"},"\ud83d\ude01"))),r.a.createElement(f,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(b,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},3:function(e,t,o){var i=o(21),r=i,a=Function("return this")();r.exportSymbol("proto.smileapp.MoodReply",null,a),r.exportSymbol("proto.smileapp.MoodRequest",null,a),r.exportSymbol("proto.smileapp.Rect",null,a),proto.smileapp.MoodRequest=function(e){i.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.smileapp.MoodRequest,i.Message),r.DEBUG&&!COMPILED&&(proto.smileapp.MoodRequest.displayName="proto.smileapp.MoodRequest"),proto.smileapp.MoodReply=function(e){i.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.smileapp.MoodReply,i.Message),r.DEBUG&&!COMPILED&&(proto.smileapp.MoodReply.displayName="proto.smileapp.MoodReply"),proto.smileapp.Rect=function(e){i.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.smileapp.Rect,i.Message),r.DEBUG&&!COMPILED&&(proto.smileapp.Rect.displayName="proto.smileapp.Rect"),i.Message.GENERATE_TO_OBJECT&&(proto.smileapp.MoodRequest.prototype.toObject=function(e){return proto.smileapp.MoodRequest.toObject(e,this)},proto.smileapp.MoodRequest.toObject=function(e,t){var o={contenttype:i.Message.getFieldWithDefault(t,1,""),body:t.getBody_asB64()};return e&&(o.$jspbMessageInstance=t),o}),proto.smileapp.MoodRequest.deserializeBinary=function(e){var t=new i.BinaryReader(e),o=new proto.smileapp.MoodRequest;return proto.smileapp.MoodRequest.deserializeBinaryFromReader(o,t)},proto.smileapp.MoodRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var o=t.readString();e.setContenttype(o);break;case 2:o=t.readBytes();e.setBody(o);break;default:t.skipField()}}return e},proto.smileapp.MoodRequest.prototype.serializeBinary=function(){var e=new i.BinaryWriter;return proto.smileapp.MoodRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.smileapp.MoodRequest.serializeBinaryToWriter=function(e,t){var o=void 0;(o=e.getContenttype()).length>0&&t.writeString(1,o),(o=e.getBody_asU8()).length>0&&t.writeBytes(2,o)},proto.smileapp.MoodRequest.prototype.getContenttype=function(){return i.Message.getFieldWithDefault(this,1,"")},proto.smileapp.MoodRequest.prototype.setContenttype=function(e){i.Message.setProto3StringField(this,1,e)},proto.smileapp.MoodRequest.prototype.getBody=function(){return i.Message.getFieldWithDefault(this,2,"")},proto.smileapp.MoodRequest.prototype.getBody_asB64=function(){return i.Message.bytesAsB64(this.getBody())},proto.smileapp.MoodRequest.prototype.getBody_asU8=function(){return i.Message.bytesAsU8(this.getBody())},proto.smileapp.MoodRequest.prototype.setBody=function(e){i.Message.setProto3BytesField(this,2,e)},i.Message.GENERATE_TO_OBJECT&&(proto.smileapp.MoodReply.prototype.toObject=function(e){return proto.smileapp.MoodReply.toObject(e,this)},proto.smileapp.MoodReply.toObject=function(e,t){var o,r={mood:i.Message.getFieldWithDefault(t,1,""),emoji:i.Message.getFieldWithDefault(t,2,""),rect:(o=t.getRect())&&proto.smileapp.Rect.toObject(e,o)};return e&&(r.$jspbMessageInstance=t),r}),proto.smileapp.MoodReply.deserializeBinary=function(e){var t=new i.BinaryReader(e),o=new proto.smileapp.MoodReply;return proto.smileapp.MoodReply.deserializeBinaryFromReader(o,t)},proto.smileapp.MoodReply.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var o=t.readString();e.setMood(o);break;case 2:o=t.readString();e.setEmoji(o);break;case 3:o=new proto.smileapp.Rect;t.readMessage(o,proto.smileapp.Rect.deserializeBinaryFromReader),e.setRect(o);break;default:t.skipField()}}return e},proto.smileapp.MoodReply.prototype.serializeBinary=function(){var e=new i.BinaryWriter;return proto.smileapp.MoodReply.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.smileapp.MoodReply.serializeBinaryToWriter=function(e,t){var o=void 0;(o=e.getMood()).length>0&&t.writeString(1,o),(o=e.getEmoji()).length>0&&t.writeString(2,o),null!=(o=e.getRect())&&t.writeMessage(3,o,proto.smileapp.Rect.serializeBinaryToWriter)},proto.smileapp.MoodReply.prototype.getMood=function(){return i.Message.getFieldWithDefault(this,1,"")},proto.smileapp.MoodReply.prototype.setMood=function(e){i.Message.setProto3StringField(this,1,e)},proto.smileapp.MoodReply.prototype.getEmoji=function(){return i.Message.getFieldWithDefault(this,2,"")},proto.smileapp.MoodReply.prototype.setEmoji=function(e){i.Message.setProto3StringField(this,2,e)},proto.smileapp.MoodReply.prototype.getRect=function(){return i.Message.getWrapperField(this,proto.smileapp.Rect,3)},proto.smileapp.MoodReply.prototype.setRect=function(e){i.Message.setWrapperField(this,3,e)},proto.smileapp.MoodReply.prototype.clearRect=function(){this.setRect(void 0)},proto.smileapp.MoodReply.prototype.hasRect=function(){return null!=i.Message.getField(this,3)},i.Message.GENERATE_TO_OBJECT&&(proto.smileapp.Rect.prototype.toObject=function(e){return proto.smileapp.Rect.toObject(e,this)},proto.smileapp.Rect.toObject=function(e,t){var o={x:i.Message.getFieldWithDefault(t,1,0),y:i.Message.getFieldWithDefault(t,2,0),width:i.Message.getFieldWithDefault(t,3,0),height:i.Message.getFieldWithDefault(t,4,0)};return e&&(o.$jspbMessageInstance=t),o}),proto.smileapp.Rect.deserializeBinary=function(e){var t=new i.BinaryReader(e),o=new proto.smileapp.Rect;return proto.smileapp.Rect.deserializeBinaryFromReader(o,t)},proto.smileapp.Rect.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var o=t.readUint32();e.setX(o);break;case 2:o=t.readUint32();e.setY(o);break;case 3:o=t.readUint32();e.setWidth(o);break;case 4:o=t.readUint32();e.setHeight(o);break;default:t.skipField()}}return e},proto.smileapp.Rect.prototype.serializeBinary=function(){var e=new i.BinaryWriter;return proto.smileapp.Rect.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.smileapp.Rect.serializeBinaryToWriter=function(e,t){var o=void 0;0!==(o=e.getX())&&t.writeUint32(1,o),0!==(o=e.getY())&&t.writeUint32(2,o),0!==(o=e.getWidth())&&t.writeUint32(3,o),0!==(o=e.getHeight())&&t.writeUint32(4,o)},proto.smileapp.Rect.prototype.getX=function(){return i.Message.getFieldWithDefault(this,1,0)},proto.smileapp.Rect.prototype.setX=function(e){i.Message.setProto3IntField(this,1,e)},proto.smileapp.Rect.prototype.getY=function(){return i.Message.getFieldWithDefault(this,2,0)},proto.smileapp.Rect.prototype.setY=function(e){i.Message.setProto3IntField(this,2,e)},proto.smileapp.Rect.prototype.getWidth=function(){return i.Message.getFieldWithDefault(this,3,0)},proto.smileapp.Rect.prototype.setWidth=function(e){i.Message.setProto3IntField(this,3,e)},proto.smileapp.Rect.prototype.getHeight=function(){return i.Message.getFieldWithDefault(this,4,0)},proto.smileapp.Rect.prototype.setHeight=function(e){i.Message.setProto3IntField(this,4,e)},r.object.extend(t,proto.smileapp)}},[[14,1,2]]]);
//# sourceMappingURL=main.beff8cc0.chunk.js.map